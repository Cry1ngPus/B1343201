# 📄 書籍展示與交易選項 - 功能需求文件 (Book Display Requirements)

文件定義關於書籍刊登、詳細資訊展示以及交易選項設置的功能和非功能性需求。
---
## 0. 系統說明 (System Overview)

書籍搜尋系統是平台的核心組件，專門處理買家（學弟）的檢索請求，以確保他們能在**短時間內找到目標書籍**，並根據課程、老師等多維度資訊進行篩選和排序。

* **主要目標：** 提供高效、精確、多樣化的書籍檢索服務。
* **使用者：** 平台所有註冊用戶（買家）。
* **功能涵蓋：** 支援多維度關鍵字查詢、結果篩選、排序和加權計分。
---
## 1. 💻 初步系統架構 (Preliminary System Architecture)

為了滿足搜尋速度（效能）和複雜查詢的需求，我們計劃採用**專用搜尋引擎**來處理檢索任務。

* **核心組件：**
    * **應用程式服務器 (Application Server):** 處理 API 請求、業務邏輯和結果格式化。
    * **主資料庫 (Primary Database):** 儲存書籍的詳細、交易、使用者等**主要資料**。
    * **專用搜尋引擎 (Dedicated Search Engine):** 建議採用 **Elasticsearch** 或 **Solr**，專門用於建立書籍的全文索引，處理複雜查詢和加權計分。

* **資料同步流程：** 當書籍資訊（如刊登、價格、狀態）發生變動時，系統必須將資料同步推送到專用搜尋引擎，以確保搜尋結果的即時性。
---
## 2. 📖 功能性需求 (Functional Requirements)

### 賣家 (學長) 上架與管理

| 編號 | 需求描述 | 備註 |
| :--- | :--- | :--- |
| **FR-BD-001** | **書籍刊登功能：** 賣家必須能夠透過簡單的步驟，完成書籍的上架，並輕鬆管理其列表。 | 滿足學長「簡單操作且容易管理」的要求。 |
| **FR-BD-002** | **必填欄位強制：** 系統必須強制賣家輸入產品照片、書名、對應課程、書籍新舊程度（使用時間或狀況）等基本詳細資訊。 | 滿足原始需求中「產品必須包含基礎資訊」的要求。 |
| **FR-BD-003** | **多張圖片支援：** 賣家必須能夠上傳**多張**書籍的照片（PNG, JPG格式），以供買家多角度檢查書籍完整性。 | 滿足學弟「進行試閱與檢查書籍完整」的判斷依據。 |
| **FR-BD-004** | **書籍狀態管理：** 賣家必須能管理書籍的狀態，例如設定為 `刊登中`、`已保留`、`已售出` 或 `已下架`。 | 滿足學長「容易管理」的要求。 |

### 買家 (學弟) 瀏覽與交易

| 編號 | 需求描述 | 備註 |
| :--- | :--- | :--- |
| **FR-BD-005** | **關鍵資訊展示：** 書籍頁面必須將「書籍完整程度」和「使用時間」等關鍵資訊清晰展示給買家，作為購買判斷依據。 | 滿足學弟「作為是否購買此書的判斷依據」的要求。 |
| **FR-BD-006** | **交易選項展示：** 在書籍頁面必須清晰展示買家可選擇的取貨選項，並且**必須包含面交以外的選項**（如：郵寄、超商取貨）。 | 滿足學弟「有面交以外的取貨選項」的要求。 |
| **FR-BD-007** | **購買意願通知：** 當買家在購買頁面確認購買時，系統應能即時連動至賣家帳號或通知管道，發送購買通知。 | 滿足測試項目 `4.` 的要求（可正常連結通知賣家）。 |

---

## 3. 🛡️ 非功能性需求 (Non-Functional Requirements)

| 編號 | 需求類別 | 需求描述 |
| :--- | :--- | :--- |
| **NFR-BD-S-001** | **安全性** | 系統必須嚴格檢查圖片輸入格式和內容，防止惡意輸入（如 **payload**），確保不會導致網站癱瘓。 |
| **NFR-BD-S-002** | **隱私保護** | 交易過程中，必須透過**站內系統或中介機制**保護買賣雙方的個人聯絡方式，確保交易過程中的隱私。 |
| **NFR-BD-P-001** | **效能** | 書籍展示頁面必須優化圖片載入速度和資料請求，確保在可接受時間(500ms)內完成頁面渲染。 |

---

## 4. 測試與驗收標準 (Acceptance Criteria)

這些標準直接對應設計文件中的測試項目，用於驗收功能是否符合要求。

| 編號 | 驗收描述 | 依據 |
| :--- | :--- | :--- |
| **AC-BD-001** | 驗證基礎的產品照片、書名、對應課程等資訊**能正常上傳**並顯示。 | 原始測試項目 `1.` |
| **AC-BD-002** | 驗證圖片輸入欄位，確保**沒有可能出現的安全隱患**，不會導致網站癱瘓。 | 原始測試項目 `2.` |
| **AC-BD-003** | 驗證當用戶嘗試確認購買請求時，能**正確連結至賣家帳號**並發送通知。 | 原始測試項目 `3.` |
| **AC-BD-004** | 驗證書籍展示頁面能根據賣家設定，**提供面交以外的多種取貨選項**。 | 原始需求（學妹） |
---
## 5. 💰 系統限制：收費機制 (System Constraints: Fee Mechanism)

平台必須實施交易收費機制，以支持營運和服務維護。

| 限制類型 | 限制內容 | 技術設計影響 |
| :--- | :--- | :--- |
| **CON-BD-001** | **交易佣金：** 系統將向**賣家**收取每筆成功交易金額的 **5%** 作為平台服務費。 | 需設計金流結算模組自動計算和扣除費用。 |
| **CON-BD-002** | **最低收費額：** 若計算出的佣金低於新台幣 **10 元**，則統一收取 **10 元**。 | 金流計算邏輯必須為：**費用 = MAX (10, 交易總額 \* 0.05)**。 |
| **CON-BD-003** | **收費通知：** 每次交易完成和佣金結算時，系統必須向賣家發送清晰的**收費明細通知**。 | 需整合通知服務（Email/站內信）來觸發結算報告。 |

