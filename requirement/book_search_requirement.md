# 📄 書籍搜尋系統 - 功能需求文件 (Book Search Requirements)

這份文件定義了宜蘭大學二手書交易平台中，關於書籍搜尋、過濾、排序和結果呈現的功能和非功能性需求。

## 1. 💻 初步系統架構 (Preliminary System Architecture)

為了滿足搜尋速度（效能）和複雜查詢的需求，我們計劃採用**專用搜尋引擎**來處理檢索任務。

* **核心組件：**
    * **應用程式服務器 (Application Server):** 處理 API 請求、業務邏輯和結果格式化。
    * **主資料庫 (Primary Database):** 儲存書籍的詳細、交易、使用者等**主要資料**。
    * **專用搜尋引擎 (Dedicated Search Engine):** 建議採用 **Elasticsearch** 或 **Solr**，專門用於建立書籍的全文索引，處理複雜查詢和加權計分。

* **資料同步流程：** 當書籍資訊（如刊登、價格、狀態）發生變動時，系統必須將資料同步推送到專用搜尋引擎，以確保搜尋結果的即時性。
---
## 2. 📖 功能性需求 (Functional Requirements)

### 買家 (學弟) 檢索與篩選

| 編號 | 需求描述 | 備註 |
| :--- | :--- | :--- |
| **FR-BS-001** | **關鍵字搜尋：** 支援透過書名、作者、ISBN 進行模糊或精確的關鍵字搜尋。 | 必須支援 |
| **FR-BS-002** | **多維度搜尋：** 支援透過**對應課程名稱**和**授課老師姓名**進行檢索，滿足學弟在忘記書名時仍能找到書籍的需求。 | 滿足學弟需求。 |
| **FR-BS-003** | **篩選功能：** 支援根據書籍的新舊程度、價格範圍、交易方式（面交/郵寄）進行結果篩選。 | 必須支援 |

---
## 3. 🛡️ 非功能性需求 (Non-Functional Requirements)

| 編號 | 需求類別 | 需求描述 |
| :--- | :--- | :--- |
| **NFR-BS-P-001** | **效能 (速度)** | 95% 的搜尋請求必須在 **500 毫秒 (ms)** 內返回結果列表。 |
| **NFR-BS-S-001** | **安全性** | 搜尋 API 接口必須限制外部直接訪問，所有查詢都必須經過應用程式服務器進行驗證和清理，防止惡意查詢。 |
| **NFR-BS-A-001** | **可用性 (準確性)** | 搜尋結果必須與實際庫存狀態保持**一致**，已售出或下架的書籍不應出現在搜尋結果中。 |
| **NFR-BS-E-001** | **可擴展性** | 系統設計必須能夠應對書籍數量擴展到未來更大規模的需求，搜尋性能不應顯著下降。 |

---
## 4. 測試與驗收標準 (Acceptance Criteria)

這些標準直接對應設計文件中的測試項目，用於驗收搜尋功能是否符合要求。

| 編號 | 驗收描述 | 依據 |
| :--- | :--- | :--- |
| **AC-BS-001** | 驗證搜尋功能是否**正常運作**，能在可忍受時間內（<500ms）將相關書籍呈現給買家。 | 原始測試項目 `2.` |
| **AC-BS-002** | 驗證搜尋導覽（篩選器、排序選項）是否**正常運作**，可供買家使用多種方式獲取書籍。 | 原始測試項目 `3.` |
| **AC-BS-003** | 驗證當使用者輸入關鍵字，系統返回結果的**加權排序**是否符合預期設計（例如：書名匹配應排在最前面）。 | FR-BS-004 |
| **AC-BS-004** | 驗證已標記為**「已售出」**的書籍是否會被排除在搜尋結果之外。 | NFR-BS-A-001 |

---
